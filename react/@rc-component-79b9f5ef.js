import{c as S,f as na,g as ba,e as U,h as Ra}from"./@babel-e5cbf021.js";import{r as t}from"./react-e483b31d.js";import{r as Pa}from"./react-dom-ce3e84ee.js";import{c as Fr,a as Y,d as Ea,u as Wa,r as sa,s as Da,e as ka,f as za,h as xa,i as Ve,j as oa,k as Ba,l as va,g as ia,m as Ha,n as Fa}from"./rc-util-6b529ca7.js";import{c as rr}from"./classnames-eea0979a.js";import{R as La}from"./rc-resize-observer-f83f8b7d.js";import{C as Ta}from"./rc-motion-e4fc5c25.js";var Na=t.createContext(null),ca=[];function _a(e,a){var r=t.useState(function(){if(!Fr())return null;var m=document.createElement("div");return m}),n=S(r,1),o=n[0],l=t.useRef(!1),s=t.useContext(Na),c=t.useState(ca),d=S(c,2),h=d[0],b=d[1],g=s||(l.current?void 0:function(m){b(function(w){var D=[m].concat(na(w));return D})});function P(){o.parentElement||document.body.appendChild(o),l.current=!0}function f(){var m;(m=o.parentElement)===null||m===void 0||m.removeChild(o),l.current=!1}return Y(function(){return e?s?s(P):P():f(),f},[e]),Y(function(){h.length&&(h.forEach(function(m){return m()}),b(ca))},[h]),[o,g]}function Va(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var Aa="rc-util-locker-".concat(Date.now()),fa=0;function Ua(e){var a=!!e,r=t.useState(function(){return fa+=1,"".concat(Aa,"_").concat(fa)}),n=S(r,1),o=n[0];Y(function(){if(a){var l=Ea(document.body).width,s=Va();Wa(`
html body {
  overflow-y: hidden;
  `.concat(s?"width: calc(100% - ".concat(l,"px);"):"",`
}`),o)}else sa(o);return function(){sa(o)}},[a,o])}var da=!1;function qa(e){return typeof e=="boolean"&&(da=e),da}var ha=function(a){return a===!1?!1:!Fr()||!a?null:typeof a=="string"?document.querySelector(a):typeof a=="function"?a():a},$a=t.forwardRef(function(e,a){var r=e.open,n=e.autoLock,o=e.getContainer;e.debug;var l=e.autoDestroy,s=l===void 0?!0:l,c=e.children,d=t.useState(r),h=S(d,2),b=h[0],g=h[1],P=b||r;t.useEffect(function(){(s||r)&&g(r)},[r,s]);var f=t.useState(function(){return ha(o)}),m=S(f,2),w=m[0],D=m[1];t.useEffect(function(){var V=ha(o);D(V??null)});var E=_a(P&&!w),k=S(E,2),y=k[0],u=k[1],B=w??y;Ua(n&&r&&Fr()&&(B===y||B===document.body));var q=null;if(c&&Da(c)&&a){var I=c;q=I.ref}var X=ka(q,a);if(!P||!Fr()||w===void 0)return null;var ee=B===!1||qa(),_=c;return a&&(_=t.cloneElement(c,{ref:X})),t.createElement(Na.Provider,{value:u},ee?_:Pa.createPortal(_,B))});function Qa(e){var a=e.prefixCls,r=e.align,n=e.arrow,o=e.arrowPos,l=n||{},s=l.className,c=l.content,d=o.x,h=d===void 0?0:d,b=o.y,g=b===void 0?0:b,P=t.useRef();if(!r||!r.points)return null;var f={position:"absolute"};if(r.autoArrow!==!1){var m=r.points[0],w=r.points[1],D=m[0],E=m[1],k=w[0],y=w[1];D===k||!["t","b"].includes(D)?f.top=g:D==="t"?f.top=0:f.bottom=0,E===y||!["l","r"].includes(E)?f.left=h:E==="l"?f.left=0:f.right=0}return t.createElement("div",{ref:P,className:rr("".concat(a,"-arrow"),s),style:f},c)}function ja(e){var a=e.prefixCls,r=e.open,n=e.zIndex,o=e.mask,l=e.motion;return o?t.createElement(Ta,ba({},l,{motionAppear:!0,visible:r,removeOnLeave:!0}),function(s){var c=s.className;return t.createElement("div",{style:{zIndex:n},className:rr("".concat(a,"-mask"),c)})}):null}var Ia=t.memo(function(e){var a=e.children;return a},function(e,a){return a.cache}),Ja=t.forwardRef(function(e,a){var r=e.popup,n=e.className,o=e.prefixCls,l=e.style,s=e.target,c=e.onVisibleChanged,d=e.open,h=e.keepDom,b=e.fresh,g=e.onClick,P=e.mask,f=e.arrow,m=e.arrowPos,w=e.align,D=e.motion,E=e.maskMotion,k=e.forceRender,y=e.getPopupContainer,u=e.autoDestroy,B=e.portal,q=e.zIndex,I=e.onMouseEnter,X=e.onMouseLeave,ee=e.onPointerEnter,_=e.ready,V=e.offsetX,fe=e.offsetY,de=e.offsetR,le=e.offsetB,Q=e.onAlign,W=e.onPrepare,C=e.stretch,J=e.targetWidth,L=e.targetHeight,G=typeof r=="function"?r():r,ar=d||h,re=(y==null?void 0:y.length)>0,tr=t.useState(!y||!re),Ae=S(tr,2),se=Ae[0],Ue=Ae[1];if(Y(function(){!se&&re&&s&&Ue(!0)},[se,re,s]),!se)return null;var A="auto",H={left:"-1000vw",top:"-1000vh",right:A,bottom:A};if(_||!d){var ae,ve=w.points,qe=w.dynamicInset||((ae=w._experimental)===null||ae===void 0?void 0:ae.dynamicInset),Qe=qe&&ve[0][1]==="r",he=qe&&ve[0][0]==="b";Qe?(H.right=de,H.left=A):(H.left=V,H.right=A),he?(H.bottom=le,H.top=A):(H.top=fe,H.bottom=A)}var K={};return C&&(C.includes("height")&&L?K.height=L:C.includes("minHeight")&&L&&(K.minHeight=L),C.includes("width")&&J?K.width=J:C.includes("minWidth")&&J&&(K.minWidth=J)),d||(K.pointerEvents="none"),t.createElement(B,{open:k||ar,getContainer:y&&function(){return y(s)},autoDestroy:u},t.createElement(ja,{prefixCls:o,open:d,zIndex:q,mask:P,motion:E}),t.createElement(La,{onResize:Q,disabled:!d},function(je){return t.createElement(Ta,ba({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:k,leavedClassName:"".concat(o,"-hidden")},D,{onAppearPrepare:W,onEnterPrepare:W,visible:d,onVisibleChanged:function(me){var M;D==null||(M=D.onVisibleChanged)===null||M===void 0||M.call(D,me),c(me)}}),function(te,me){var M=te.className,Ie=te.style,ge=rr(o,M,n);return t.createElement("div",{ref:za(je,a,me),className:ge,style:U(U(U(U({"--arrow-x":"".concat(m.x||0,"px"),"--arrow-y":"".concat(m.y||0,"px")},H),K),Ie),{},{boxSizing:"border-box",zIndex:q},l),onMouseEnter:I,onMouseLeave:X,onPointerEnter:ee,onClick:g},f&&t.createElement(Qa,{prefixCls:o,arrow:f,arrowPos:m,align:w}),t.createElement(Ia,{cache:!d&&!b},G))})}))}),Ga=t.forwardRef(function(e,a){var r=e.children,n=e.getTriggerDOMNode,o=Da(r),l=t.useCallback(function(c){xa(a,n?n(c):c)},[n]),s=ka(l,r.ref);return o?t.cloneElement(r,{ref:s}):r}),ma=t.createContext(null);function ga(e){return e?Array.isArray(e)?e:[e]:[]}function Ka(e,a,r,n){return t.useMemo(function(){var o=ga(r??a),l=ga(n??a),s=new Set(o),c=new Set(l);return e&&(s.has("hover")&&(s.delete("hover"),s.add("click")),c.has("hover")&&(c.delete("hover"),c.add("click"))),[s,c]},[e,a,r,n])}function Za(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;return r?e[0]===a[0]:e[0]===a[0]&&e[1]===a[1]}function Ya(e,a,r,n){for(var o=r.points,l=Object.keys(e),s=0;s<l.length;s+=1){var c,d=l[s];if(Za((c=e[d])===null||c===void 0?void 0:c.points,o,n))return"".concat(a,"-placement-").concat(d)}return""}function ya(e,a,r,n){return a||(r?{motionName:"".concat(e,"-").concat(r)}:n?{motionName:n}:null)}function hr(e){return e.ownerDocument.defaultView}function ua(e){for(var a=[],r=e==null?void 0:e.parentElement,n=["hidden","scroll","clip","auto"];r;){var o=hr(r).getComputedStyle(r),l=o.overflowX,s=o.overflowY,c=o.overflow;[l,s,c].some(function(d){return n.includes(d)})&&a.push(r),r=r.parentElement}return a}function dr(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return Number.isNaN(e)?a:e}function fr(e){return dr(parseFloat(e),0)}function Ca(e,a){var r=U({},e);return(a||[]).forEach(function(n){if(!(n instanceof HTMLBodyElement||n instanceof HTMLHtmlElement)){var o=hr(n).getComputedStyle(n),l=o.overflow,s=o.overflowClipMargin,c=o.borderTopWidth,d=o.borderBottomWidth,h=o.borderLeftWidth,b=o.borderRightWidth,g=n.getBoundingClientRect(),P=n.offsetHeight,f=n.clientHeight,m=n.offsetWidth,w=n.clientWidth,D=fr(c),E=fr(d),k=fr(h),y=fr(b),u=dr(Math.round(g.width/m*1e3)/1e3),B=dr(Math.round(g.height/P*1e3)/1e3),q=(m-w-k-y)*u,I=(P-f-D-E)*B,X=D*B,ee=E*B,_=k*u,V=y*u,fe=0,de=0;if(l==="clip"){var le=fr(s);fe=le*u,de=le*B}var Q=g.x+_-fe,W=g.y+X-de,C=Q+g.width+2*fe-_-V-q,J=W+g.height+2*de-X-ee-I;r.left=Math.max(r.left,Q),r.top=Math.max(r.top,W),r.right=Math.min(r.right,C),r.bottom=Math.min(r.bottom,J)}}),r}function Ma(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r="".concat(a),n=r.match(/^(.*)\%$/);return n?e*(parseFloat(n[1])/100):parseFloat(r)}function wa(e,a){var r=a||[],n=S(r,2),o=n[0],l=n[1];return[Ma(e.width,o),Ma(e.height,l)]}function Sa(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return[e[0],e[1]]}function er(e,a){var r=a[0],n=a[1],o,l;return r==="t"?l=e.y:r==="b"?l=e.y+e.height:l=e.y+e.height/2,n==="l"?o=e.x:n==="r"?o=e.x+e.width:o=e.x+e.width/2,{x:o,y:l}}function Ne(e,a){var r={t:"b",b:"t",l:"r",r:"l"};return e.map(function(n,o){return o===a?r[n]||"c":n}).join("")}function Xa(e,a,r,n,o,l,s){var c=t.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:o[n]||{}}),d=S(c,2),h=d[0],b=d[1],g=t.useRef(0),P=t.useMemo(function(){return a?ua(a):[]},[a]),f=t.useRef({}),m=function(){f.current={}};e||m();var w=Ve(function(){if(a&&r&&e){let p=function(Se,_e){var Oe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ie,pe=L.x+Se,vr=L.y+_e,cr=pe+H,xr=vr+A,pr=Math.max(pe,Oe.left),ea=Math.max(vr,Oe.top),ra=Math.min(cr,Oe.right),aa=Math.min(xr,Oe.bottom);return Math.max(0,(ra-pr)*(aa-ea))},zr=function(){De=L.y+$,ke=De+A,Le=L.x+z,Ke=Le+H};var k,y,u=a,B=u.ownerDocument,q=hr(u),I=q.getComputedStyle(u),X=I.width,ee=I.height,_=I.position,V=u.style.left,fe=u.style.top,de=u.style.right,le=u.style.bottom,Q=U(U({},o[n]),l),W=B.createElement("div");(k=u.parentElement)===null||k===void 0||k.appendChild(W),W.style.left="".concat(u.offsetLeft,"px"),W.style.top="".concat(u.offsetTop,"px"),W.style.position=_,W.style.height="".concat(u.offsetHeight,"px"),W.style.width="".concat(u.offsetWidth,"px"),u.style.left="0",u.style.top="0",u.style.right="auto",u.style.bottom="auto";var C;if(Array.isArray(r))C={x:r[0],y:r[1],width:0,height:0};else{var J=r.getBoundingClientRect();C={x:J.x,y:J.y,width:J.width,height:J.height}}var L=u.getBoundingClientRect(),G=B.documentElement,ar=G.clientWidth,re=G.clientHeight,tr=G.scrollWidth,Ae=G.scrollHeight,se=G.scrollTop,Ue=G.scrollLeft,A=L.height,H=L.width,ae=C.height,ve=C.width,qe={left:0,top:0,right:ar,bottom:re},Qe={left:-Ue,top:-se,right:tr-Ue,bottom:Ae-se},he=Q.htmlRegion,K="visible",je="visibleFirst";he!=="scroll"&&he!==je&&(he=K);var te=he===je,me=Ca(Qe,P),M=Ca(qe,P),Ie=he===K?M:me,ge=te?M:Ie;u.style.left="auto",u.style.top="auto",u.style.right="0",u.style.bottom="0";var ce=u.getBoundingClientRect();u.style.left=V,u.style.top=fe,u.style.right=de,u.style.bottom=le,(y=u.parentElement)===null||y===void 0||y.removeChild(W);var $e=dr(Math.round(H/parseFloat(X)*1e3)/1e3),Re=dr(Math.round(A/parseFloat(ee)*1e3)/1e3);if($e===0||Re===0||oa(r)&&!Ba(r))return;var _r=Q.offset,mr=Q.targetOffset,ne=wa(L,_r),gr=S(ne,2),oe=gr[0],ie=gr[1],yr=wa(C,mr),ue=S(yr,2),Vr=ue[0],Cr=ue[1];C.x-=Vr,C.y-=Cr;var Ar=Q.points||[],Ee=S(Ar,2),O=Ee[0],be=Ee[1],ye=Sa(be),Z=Sa(O),Mr=er(C,ye),wr=er(L,Z),Ce=U({},Q),z=Mr.x-wr.x+oe,$=Mr.y-wr.y+ie,R=p(z,$),Je=p(z,$,M),Pe=er(C,["t","l"]),nr=er(L,["t","l"]),or=er(C,["b","r"]),ir=er(L,["b","r"]),j=Q.overflow||{},Ur=j.adjustX,Sr=j.adjustY,Ge=j.shiftX,ur=j.shiftY,br=function(_e){return typeof _e=="boolean"?_e:_e>=0},De,ke,Le,Ke;zr();var lr=br(Sr),sr=Z[0]===ye[0];if(lr&&Z[0]==="t"&&(ke>ge.bottom||f.current.bt)){var We=$;sr?We-=A-ae:We=Pe.y-ir.y-ie;var ze=p(z,We),qr=p(z,We,M);ze>R||ze===R&&(!te||qr>=Je)?(f.current.bt=!0,$=We,ie=-ie,Ce.points=[Ne(Z,0),Ne(ye,0)]):f.current.bt=!1}if(lr&&Z[0]==="b"&&(De<ge.top||f.current.tb)){var F=$;sr?F+=A-ae:F=or.y-nr.y-ie;var Pr=p(z,F),Qr=p(z,F,M);Pr>R||Pr===R&&(!te||Qr>=Je)?(f.current.tb=!0,$=F,ie=-ie,Ce.points=[Ne(Z,0),Ne(ye,0)]):f.current.tb=!1}var Dr=br(Ur),kr=Z[1]===ye[1];if(Dr&&Z[1]==="l"&&(Ke>ge.right||f.current.rl)){var xe=z;kr?xe-=H-ve:xe=Pe.x-ir.x-oe;var Lr=p(xe,$),jr=p(xe,$,M);Lr>R||Lr===R&&(!te||jr>=Je)?(f.current.rl=!0,z=xe,oe=-oe,Ce.points=[Ne(Z,1),Ne(ye,1)]):f.current.rl=!1}if(Dr&&Z[1]==="r"&&(Le<ge.left||f.current.lr)){var Be=z;kr?Be+=H-ve:Be=or.x-nr.x-oe;var Tr=p(Be,$),Ze=p(Be,$,M);Tr>R||Tr===R&&(!te||Ze>=Je)?(f.current.lr=!0,z=Be,oe=-oe,Ce.points=[Ne(Z,1),Ne(ye,1)]):f.current.lr=!1}zr();var Me=Ge===!0?0:Ge;typeof Me=="number"&&(Le<M.left&&(z-=Le-M.left-oe,C.x+ve<M.left+Me&&(z+=C.x-M.left+ve-Me)),Ke>M.right&&(z-=Ke-M.right-oe,C.x>M.right-Me&&(z+=C.x-M.right+Me)));var He=ur===!0?0:ur;typeof He=="number"&&(De<M.top&&($-=De-M.top-ie,C.y+ae<M.top+He&&($+=C.y-M.top+ae-He)),ke>M.bottom&&($-=ke-M.bottom-ie,C.y>M.bottom-He&&($+=C.y-M.bottom+He)));var Ye=L.x+z,Xe=Ye+H,we=L.y+$,Nr=we+A,Fe=C.x,Te=Fe+ve,$r=C.y,Ir=$r+ae,Jr=Math.max(Ye,Fe),Rr=Math.min(Xe,Te),Gr=(Jr+Rr)/2,Kr=Gr-Ye,Zr=Math.max(we,$r),Er=Math.min(Nr,Ir),Yr=(Zr+Er)/2,Xr=Yr-we;s==null||s(a,Ce);var Wr=ce.right-L.x-(z+L.width),Or=ce.bottom-L.y-($+L.height);b({ready:!0,offsetX:z/$e,offsetY:$/Re,offsetR:Wr/$e,offsetB:Or/Re,arrowX:Kr/$e,arrowY:Xr/Re,scaleX:$e,scaleY:Re,align:Ce})}}),D=function(){g.current+=1;var y=g.current;Promise.resolve().then(function(){g.current===y&&w()})},E=function(){b(function(y){return U(U({},y),{},{ready:!1})})};return Y(E,[n]),Y(function(){e||E()},[e]),[h.ready,h.offsetX,h.offsetY,h.offsetR,h.offsetB,h.arrowX,h.arrowY,h.scaleX,h.scaleY,h.align,D]}function Oa(e,a,r,n,o){Y(function(){if(e&&a&&r){let g=function(){n(),o()};var l=a,s=r,c=ua(l),d=ua(s),h=hr(s),b=new Set([h].concat(na(c),na(d)));return b.forEach(function(P){P.addEventListener("scroll",g,{passive:!0})}),h.addEventListener("resize",g,{passive:!0}),n(),function(){b.forEach(function(P){P.removeEventListener("scroll",g),h.removeEventListener("resize",g)})}}},[e,a,r])}function pa(e,a,r,n,o,l,s,c){var d=t.useRef(e),h=t.useRef(!1);d.current!==e&&(h.current=!0,d.current=e),t.useEffect(function(){var b=va(function(){h.current=!1});return function(){va.cancel(b)}},[e]),t.useEffect(function(){if(a&&n&&(!o||l)){var b=function(){var q=!1,I=function(_){var V=_.target;q=s(V)},X=function(_){var V=_.target;!h.current&&d.current&&!q&&!s(V)&&c(!1)};return[I,X]},g=b(),P=S(g,2),f=P[0],m=P[1],w=b(),D=S(w,2),E=D[0],k=D[1],y=hr(n);y.addEventListener("mousedown",f,!0),y.addEventListener("click",m,!0),y.addEventListener("contextmenu",m,!0);var u=ia(r);return u&&(u.addEventListener("mousedown",E,!0),u.addEventListener("click",k,!0),u.addEventListener("contextmenu",k,!0)),function(){y.removeEventListener("mousedown",f,!0),y.removeEventListener("click",m,!0),y.removeEventListener("contextmenu",m,!0),u&&(u.removeEventListener("mousedown",E,!0),u.removeEventListener("click",k,!0),u.removeEventListener("contextmenu",k,!0))}}},[a,r,n,o,l])}var et=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","fresh","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];function rt(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:$a,a=t.forwardRef(function(r,n){var o=r.prefixCls,l=o===void 0?"rc-trigger-popup":o,s=r.children,c=r.action,d=c===void 0?"hover":c,h=r.showAction,b=r.hideAction,g=r.popupVisible,P=r.defaultPopupVisible,f=r.onPopupVisibleChange,m=r.afterPopupVisibleChange,w=r.mouseEnterDelay,D=r.mouseLeaveDelay,E=D===void 0?.1:D,k=r.focusDelay,y=r.blurDelay,u=r.mask,B=r.maskClosable,q=B===void 0?!0:B,I=r.getPopupContainer,X=r.forceRender,ee=r.autoDestroy,_=r.destroyPopupOnHide,V=r.popup,fe=r.popupClassName,de=r.popupStyle,le=r.popupPlacement,Q=r.builtinPlacements,W=Q===void 0?{}:Q,C=r.popupAlign,J=r.zIndex,L=r.stretch,G=r.getPopupClassNameFromAlign,ar=r.fresh,re=r.alignPoint,tr=r.onPopupClick,Ae=r.onPopupAlign,se=r.arrow,Ue=r.popupMotion,A=r.maskMotion,H=r.popupTransitionName,ae=r.popupAnimation,ve=r.maskTransitionName,qe=r.maskAnimation,Qe=r.className,he=r.getTriggerDOMNode,K=Ra(r,et),je=ee||_||!1,te=t.useState(!1),me=S(te,2),M=me[0],Ie=me[1];Y(function(){Ie(Ha())},[]);var ge=t.useRef({}),ce=t.useContext(ma),$e=t.useMemo(function(){return{registerSubPopup:function(v,T){ge.current[v]=T,ce==null||ce.registerSubPopup(v,T)}}},[ce]),Re=Fa(),_r=t.useState(null),mr=S(_r,2),ne=mr[0],gr=mr[1],oe=Ve(function(i){oa(i)&&ne!==i&&gr(i),ce==null||ce.registerSubPopup(Re,i)}),ie=t.useState(null),yr=S(ie,2),ue=yr[0],Vr=yr[1],Cr=t.useRef(null),Ar=Ve(function(i){oa(i)&&ue!==i&&(Vr(i),Cr.current=i)}),Ee=t.Children.only(s),O=(Ee==null?void 0:Ee.props)||{},be={},ye=Ve(function(i){var v,T,x=ue;return(x==null?void 0:x.contains(i))||((v=ia(x))===null||v===void 0?void 0:v.host)===i||i===x||(ne==null?void 0:ne.contains(i))||((T=ia(ne))===null||T===void 0?void 0:T.host)===i||i===ne||Object.values(ge.current).some(function(N){return(N==null?void 0:N.contains(i))||i===N})}),Z=ya(l,Ue,ae,H),Mr=ya(l,A,qe,ve),wr=t.useState(P||!1),Ce=S(wr,2),z=Ce[0],$=Ce[1],R=g??z,Je=Ve(function(i){g===void 0&&$(i)});Y(function(){$(g||!1)},[g]);var Pe=t.useRef(R);Pe.current=R;var nr=Ve(function(i){Pa.flushSync(function(){R!==i&&(Je(i),f==null||f(i))})}),or=t.useRef(),ir=function(){clearTimeout(or.current)},j=function(v){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;ir(),T===0?nr(v):or.current=setTimeout(function(){nr(v)},T*1e3)};t.useEffect(function(){return ir},[]);var Ur=t.useState(!1),Sr=S(Ur,2),Ge=Sr[0],ur=Sr[1];Y(function(i){(!i||R)&&ur(!0)},[R]);var br=t.useState(null),De=S(br,2),ke=De[0],Le=De[1],Ke=t.useState([0,0]),lr=S(Ke,2),sr=lr[0],We=lr[1],ze=function(v){We([v.clientX,v.clientY])},qr=Xa(R,ne,re?sr:ue,le,W,C,Ae),F=S(qr,11),Pr=F[0],Qr=F[1],Dr=F[2],kr=F[3],xe=F[4],Lr=F[5],jr=F[6],Be=F[7],Tr=F[8],Ze=F[9],Me=F[10],He=Ka(M,d,h,b),Ye=S(He,2),Xe=Ye[0],we=Ye[1],Nr=Xe.has("click"),Fe=we.has("click")||we.has("contextMenu"),Te=Ve(function(){Ge||Me()}),$r=function(){Pe.current&&re&&Fe&&j(!1)};Oa(R,ue,ne,Te,$r),Y(function(){Te()},[sr,le]),Y(function(){R&&!(W!=null&&W[le])&&Te()},[JSON.stringify(C)]);var Ir=t.useMemo(function(){var i=Ya(W,l,Ze,re);return rr(i,G==null?void 0:G(Ze))},[Ze,G,W,l,re]);t.useImperativeHandle(n,function(){return{nativeElement:Cr.current,forceAlign:Te}});var Jr=t.useState(0),Rr=S(Jr,2),Gr=Rr[0],Kr=Rr[1],Zr=t.useState(0),Er=S(Zr,2),Yr=Er[0],Xr=Er[1],Wr=function(){if(L&&ue){var v=ue.getBoundingClientRect();Kr(v.width),Xr(v.height)}},Or=function(){Wr(),Te()},p=function(v){ur(!1),Me(),m==null||m(v)},zr=function(){return new Promise(function(v){Wr(),Le(function(){return v})})};Y(function(){ke&&(Me(),ke(),Le(null))},[ke]);function Se(i,v,T,x){be[i]=function(N){var Br;x==null||x(N),j(v,T);for(var ta=arguments.length,la=new Array(ta>1?ta-1:0),Hr=1;Hr<ta;Hr++)la[Hr-1]=arguments[Hr];(Br=O[i])===null||Br===void 0||Br.call.apply(Br,[O,N].concat(la))}}(Nr||Fe)&&(be.onClick=function(i){var v;Pe.current&&Fe?j(!1):!Pe.current&&Nr&&(ze(i),j(!0));for(var T=arguments.length,x=new Array(T>1?T-1:0),N=1;N<T;N++)x[N-1]=arguments[N];(v=O.onClick)===null||v===void 0||v.call.apply(v,[O,i].concat(x))}),pa(R,Fe,ue,ne,u,q,ye,j);var _e=Xe.has("hover"),Oe=we.has("hover"),pe,vr;_e&&(Se("onMouseEnter",!0,w,function(i){ze(i)}),Se("onPointerEnter",!0,w,function(i){ze(i)}),pe=function(){(R||Ge)&&j(!0,w)},re&&(be.onMouseMove=function(i){var v;(v=O.onMouseMove)===null||v===void 0||v.call(O,i)})),Oe&&(Se("onMouseLeave",!1,E),Se("onPointerLeave",!1,E),vr=function(){j(!1,E)}),Xe.has("focus")&&Se("onFocus",!0,k),we.has("focus")&&Se("onBlur",!1,y),Xe.has("contextMenu")&&(be.onContextMenu=function(i){var v;Pe.current&&we.has("contextMenu")?j(!1):(ze(i),j(!0)),i.preventDefault();for(var T=arguments.length,x=new Array(T>1?T-1:0),N=1;N<T;N++)x[N-1]=arguments[N];(v=O.onContextMenu)===null||v===void 0||v.call.apply(v,[O,i].concat(x))}),Qe&&(be.className=rr(O.className,Qe));var cr=U(U({},O),be),xr={},pr=["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"];pr.forEach(function(i){K[i]&&(xr[i]=function(){for(var v,T=arguments.length,x=new Array(T),N=0;N<T;N++)x[N]=arguments[N];(v=cr[i])===null||v===void 0||v.call.apply(v,[cr].concat(x)),K[i].apply(K,x)})});var ea=t.cloneElement(Ee,U(U({},cr),xr)),ra={x:Lr,y:jr},aa=se?U({},se!==!0?se:{}):null;return t.createElement(t.Fragment,null,t.createElement(La,{disabled:!R,ref:Ar,onResize:Or},t.createElement(Ga,{getTriggerDOMNode:he},ea)),t.createElement(ma.Provider,{value:$e},t.createElement(Ja,{portal:e,ref:oe,prefixCls:l,popup:V,className:rr(fe,Ir),style:de,target:ue,onMouseEnter:pe,onMouseLeave:vr,onPointerEnter:pe,zIndex:J,open:R,keepDom:Ge,fresh:ar,onClick:tr,mask:u,motion:Z,maskMotion:Mr,onVisibleChanged:p,onPrepare:zr,forceRender:X,autoDestroy:je,getPopupContainer:I,align:Ze,arrow:aa,arrowPos:ra,ready:Pr,offsetX:Qr,offsetY:Dr,offsetR:kr,offsetB:xe,onAlign:Te,stretch:L,targetWidth:Gr/Be,targetHeight:Yr/Tr})))});return a}const st=rt($a);export{st as T};
